<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <h2><%- cohort.name %></h2>
        <p><%- cohort.members_arr.toString() %> </p>
        <hr>
        <form action="/cohorts/<%- cohort.id %>" method="get">
            <div>
                <input type="radio" id="team_count" name="method" value="teamCount">
                <label for="team_count">Team Count</label>
                <input type="radio" id="number_per_team" name="method" value="perTeam">
                <label for="number_per_team">Number Per Team</label>
            </div>
            <div>
                <label for="quantity">Quantity</label>
                <input type="text" id="quantity" name="quantity">
            </div>
            <button>Assign Teams</button>
        </form>
    </div>
        <%if (method && quantity && method == 'teamCount') {%>
            <h3># Members</h3>
            <%let leftMembers = [...cohort.members_arr];%>
            
            <%let randomIndex = Math.floor(leftMembers.length * Math.random());%>
            <%let finalArr = [];%>
            <%for (let i = 1; i <= parseInt(quantity); i++) {%>
                <%let team = [];%>
                <%for (let j = 1; j <= Math.min(secondNum, leftMembers.length); j++) {%>
                    <% team.push(leftMembers[randomIndex]) %>
                    <% leftMembers = leftMembers.filter(element => {element != leftMembers[randomIndex]}) %> 
                <%}%>
                <% finalArr.push(team) %> 
            <%}%>
            <h4><%- finalArr %> </h4>
        <%}%>
</body>
</html>